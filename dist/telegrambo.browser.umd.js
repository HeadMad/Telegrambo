(function(c,u){typeof exports=="object"&&typeof module<"u"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(c=typeof globalThis<"u"?globalThis:c||self,u(c.telegrambo={}))})(this,(function(c){"use strict";const u=BrowserRequestSenderAsync,i=new Map;i.set("message",e=>({chat_id:e.chat.id,from_chat_id:e.chat.id,message_id:e.message_id,message_thread_id:e?.message_thread_id,direct_messages_topic_id:e?.direct_messages_topic?.topic_id}));const f=e=>({business_connection_id:e.business_connection_id,chat_id:e.chat.id,message_id:e.message_id});i.set("business_message",f),i.set("edited_business_message",f),i.set("deleted_business_messages",f),i.set("business_connection",e=>({chat_id:e.user_chat_id})),i.set("callback_query",e=>({chat_id:e.message.chat.id,callback_query_id:e.id,message_id:e.message.message_id})),i.set("inline_query",e=>({inline_query_id:e.id})),i.set("channel_post",e=>({chat_id:e.chat.id,message_id:e.message_id})),i.set("poll_answer",e=>({chat_id:"user"in e?e.user.id:e.voter_chat.id})),i.set("chat_join_request",e=>({chat_id:e.from.id})),i.set("chat_boost",e=>({chat_id:e.boost.source.user.id})),i.set("removed_chat_boost",e=>({chat_id:e.source.user.id}));function C(e,t){return i.has(e)?i.get(e)(t):{}}function B(e,t,r){const d=r[t],_=C(t,d);return new Proxy(d,{get(s,n){return n in s?s[n]:n==="update"?r:n==="payload"?_:(a={})=>e(n,{..._,...a})}})}function S(){const e=new Map;return{has:t=>e.has(t),get:t=>e.get(t),add(t,r){e.has(t)?e.get(t).push(r):e.set(t,[r])}}}class m extends Error{constructor(t){super(t),this.name="BotContextErrors"}}function l(e,t={}){const r=S(),d={};d.on=(o,s)=>{typeof o=="function"&&(s=o,o=null);const n={handler:s};return r.add(o,n),{catch(a){n.reject=a}}},d.setUpdate=async o=>{const s=Object.keys(o).find(h=>h!=="update_id"),n=B(e,s,o),a=[];r.has(s)&&a.push(...r.get(s)),r.has(null)&&a.push(...r.get(null));const w=async({handler:h,reject:x})=>{try{return await h(n,s)}catch(g){if(x)try{return await x(g,n,s)}catch(E){return console.error("An error occurred within the .catch() handler itself:",E),g}else return g}};if(t.parallel===!0)return Promise.all(a.map(w));const y=[];for(const h of a)y.push(await w(h));return y};const _=new Proxy(d,{get:(o,s)=>o[s]??((n={})=>e(s,n)),set(o,s,n){if(s in o)throw new m(`Can't rewrite method "${s}"`);if(typeof n!="function")throw new m(`New method "${s}" must be a function`);return o[s]=n(_),!0}});return _}function b(e,t={}){const r=u(e);return l(r,t)}const q=BrowserRequestSenderSync;function j(e,t={}){const r=q(e);return l(r,t)}c.botContext=l,c.createAsyncBot=b,c.createSyncBot=j,c.default=b,Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
//# sourceMappingURL=telegrambo.browser.umd.js.map
